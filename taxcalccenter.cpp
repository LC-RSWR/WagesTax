#include "taxcalccenter.h"

// TaxCalcCenter 类的构造函数，当前没有初始化成员变量或执行任何操作
TaxCalcCenter::TaxCalcCenter()
{

}

// calculateTax 函数用于根据传入的薪资计算个人所得税
double TaxCalcCenter::calculateTax(double salary)
{
    // 扣除起征点（1600元）后的应纳税所得额
    double taxableIncome = salary - 1600;

    // 如果应纳税所得额不超过0，则无需缴税，返回税额为0
    if (taxableIncome <= 0)
    {
        return 0;
    }
       

    // 初始化税额
    double tax = 0;

    // 根据不同的应纳税所得额区间，按阶梯税率计算税额
    if (taxableIncome <= 500) {
        // 如果应纳税所得额不超过500元，适用5%的税率
        tax = taxableIncome * 0.05;
    }
    else if (taxableIncome <= 2000) {
        // 如果应纳税所得额在500元到2000元之间，前500元适用5%，超出部分适用10%
        tax = 500 * 0.05 + (taxableIncome - 500) * 0.10;
    }
    else if (taxableIncome <= 5000) {
        // 如果应纳税所得额在2000元到5000元之间，前500元适用5%，接下来1500元适用10%，超出部分适用15%
        tax = 500 * 0.05 + 1500 * 0.10 + (taxableIncome - 2000) * 0.15;
    }
    else if (taxableIncome <= 20000) {
        // 如果应纳税所得额在5000元到20000元之间，前500元适用5%，接下来1500元适用10%，接下来的3000元适用15%，超出部分适用20%
        tax = 500 * 0.05 + 1500 * 0.10 + 3000 * 0.15 + (taxableIncome - 5000) * 0.20;
    }
    else if (taxableIncome <= 40000) {
        // 如果应纳税所得额在20000元到40000元之间，前500元适用5%，接下来1500元适用10%，接下来的3000元适用15%，接下来的15000元适用20%，超出部分适用25%
        tax = 500 * 0.05 + 1500 * 0.10 + 3000 * 0.15 + 15000 * 0.20 + (taxableIncome - 20000) * 0.25;
    }
    else if (taxableIncome <= 60000) {
        // 如果应纳税所得额在40000元到60000元之间，前500元适用5%，接下来1500元适用10%，接下来的3000元适用15%，接下来的15000元适用20%，接下来的20000元适用25%，超出部分适用30%
        tax = 500 * 0.05 + 1500 * 0.10 + 3000 * 0.15 + 15000 * 0.20 + 20000 * 0.25 + (taxableIncome - 40000) * 0.30;
    }
    else if (taxableIncome <= 80000) {
        // 如果应纳税所得额在60000元到80000元之间，前500元适用5%，接下来1500元适用10%，接下来的3000元适用15%，接下来的15000元适用20%，接下来的20000元适用25%，接下来的20000元适用30%，超出部分适用35%
        tax = 500 * 0.05 + 1500 * 0.10 + 3000 * 0.15 + 15000 * 0.20 + 20000 * 0.25 + 20000 * 0.30 + (taxableIncome - 60000) * 0.35;
    }
    else if (taxableIncome <= 100000) {
        // 如果应纳税所得额在80000元到100000元之间，前500元适用5%，接下来1500元适用10%，接下来的3000元适用15%，接下来的15000元适用20%，接下来的20000元适用25%，接下来的20000元适用30%，接下来的20000元适用35%，超出部分适用40%
        tax = 500 * 0.05 + 1500 * 0.10 + 3000 * 0.15 + 15000 * 0.20 + 20000 * 0.25 + 20000 * 0.30 + 20000 * 0.35 + (taxableIncome - 80000) * 0.40;
    }
    else {
        // 如果应纳税所得额超过100000元，前500元适用5%，接下来1500元适用10%，接下来的3000元适用15%，接下来的15000元适用20%，接下来的20000元适用25%，接下来的20000元适用30%，接下来的20000元适用35%，接下来的20000元适用40%，超出部分适用45%
        tax = 500 * 0.05 + 1500 * 0.10 + 3000 * 0.15 + 15000 * 0.20 + 20000 * 0.25 + 20000 * 0.30 + 20000 * 0.35 + 20000 * 0.40 + (taxableIncome - 100000) * 0.45;
    }

    // 返回计算出的税额
    return tax;
}
